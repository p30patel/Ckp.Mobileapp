<kendo-mobile-view k-title="'{{form.title.resoruceValue}}'" ng-controller="homeController" k-on-show="intShow(kendoEvent)" k-after-show="afterShow" k-before-show="beforeShow" data-use-native-scrolling="true">
    <kendo-mobile-header>
        <kendo-mobile-nav-bar class="km-accent">
            <kendo-mobile-button ng-show="messageCount > 0" id="btn_message" k-align="'right'" k-transition="'overlay'" k-rel="'modalview'" ng-click="showAlertModel()">
                <i class="ck-icon ck-messages"></i>
            </kendo-mobile-button>
            <a data-align="left" data-role="button" href="#right-drawer" data-rel="drawer" data-icon="drawer-icon" class="km-widget km-button">
                <i class="ck-icon ck-menu"></i>
            </a>
            <kendo-view-title>
                <img src="styles/images/Checknet-title.png" style="width: 5em; height: .9em;" />
            </kendo-view-title>
        </kendo-mobile-nav-bar>
    </kendo-mobile-header>
    <kendo-mobile-content>
        <ul kendo-mobile-list-view class="ck-no-border">
            <li class="ck-po-container ck-grey-wrap">
                <fieldset class="ck-login">
                    <select class="ck-po-select" 
                        style="background-image: url(styles/images/down-arrow.png); background-position: 95% 50%; background-repeat: no-repeat; background-size: 1em .5em; background-color: #7F7F7F;" 
                        ng-model="selectedPara" ng-options="parameter.id as parameter.name for parameter in parameters" ng-init="selectedPara = selectedPara || '1'"></select>
                    <input class="ck-po-search" type="text" ng-change="searchChange()" value="" placeholder="{{form.search.resoruceValue}}" ng-model="searchValue"  ng-keypress="key($event)"
                        style="background-image: url(styles/images/search.png); background-position: 95% 50%; background-repeat: no-repeat; background-size: 1em 1em; background-color: #FFFFFF; " 
                        />
                </fieldset>
            </li>
            <div ng-repeat="orderCount in orderCounts ">
                <div class="ck-home " style="margin-top:-.1em; background-color:gray; ">
                    <h3>
                        <kendo-mobile-button class="ck-title touch-retailer-header" data-tap="myTouch.tap" ng-click="retailerHeader()">{{orderCount.RetailerName}}</kendo-mobile-button>
                       
                        <kendo-mobile-button class="ck-title-icon " k-transition=" 'fade' " k-rel=" 'modalview' " data-tap="myTouch.tap "  
                    ng-click="showCreditModel()" ng-show="hasCreditLock">
                            <img src="styles/images/Alert.png" style="width: 1.4em; height: 1.2em;"  ng-show="$first"/>
                        </kendo-mobile-button>
                    </h3>
                    <kendo-mobile-button-group class="ck-button-group buttongroup-home" k-options="myOptions" data-btnRetailer="{{orderCount.RetailerId}}" >
                        <li class="ck-button km-button ck-count-btn" ng-disabled="orderCount.ApprovalCount==0" >
                            <div class="ck-button-number">{{orderCount.ApprovalCount}}</div>
                            <div class="ck-button-text">{{form.approvalOrder.resoruceValue}}</div>
                        </li>
                        <li class="ck-button km-button ck-count-btn">
                            <div class="ck-button-number">{{orderCount.NewOrderCount}}</div>
                            <div class="ck-button-text">{{form.newOrder.resoruceValue}}</div>
                        </li>
                        <li class="ck-button km-button ck-count-btn">
                            <div class="ck-button-number">{{orderCount.ReleasedOrderCount}}</div>
                            <div class="ck-button-text ">{{form.releasedOrder.resoruceValue}}</div>
                        </li>
                    </kendo-mobile-button-group>
                </div>
                <br />
        
       
                <!-- Tab panes -->
                <ul kendo-mobile-list-view  style="display:none"  data-retailer="{{orderCount.RetailerId}} " class="order-header" data-orderType="Approval">
                    <li ng-show="!orders.length > 0">
                        {{form.noResults.resoruceValue}}
                    </li>
                 
                            
                    <table class="ck-table" ng-show="orders.length > 0">
                        <tr class="header">
                            <td></td>
                            <td ng-if="searchParameterId=='1'" class="spacer">{{form.orderNumber.resoruceValue}}</td>
                            <td ng-if="searchParameterId=='1'" class="spacer">{{form.salesOrder.resoruceValue}}</td>
                            <td ng-if="searchParameterId=='2'" class="spacer">{{form.salesOrder.resoruceValue}}</td>
                            <td ng-if="searchParameterId=='2'" class="spacer">{{form.orderNumber.resoruceValue}}</td>
                            <td ng-if="searchParameterId=='3'" class="spacer">{{form.shoppingCart.resoruceValue}}</td>
                            <td ng-if="searchParameterId=='3'" class="spacer">{{form.salesOrder.resoruceValue}}</td>
                            <td ng-if="searchParameterId=='4'" class="spacer">{{form.vendorRef.resoruceValue}}</td>
                            <td ng-if="searchParameterId=='4'" class="spacer">{{form.salesOrder.resoruceValue}}</td>
                            <td >{{form.orderDate.resoruceValue}}</td>
                            <td></td>
                        </tr>
                          </table>
                          <table class="ck-table" ng-show="orders.length > 0" ng-repeat="(key, value) in orders | groupBy: sortOrder">                      
                    
                        <tr class="pipe" ng-repeat="order in value | limitTo : 1">
                            <td>
                                <input type="checkbox"  class="km-checkbox" value="{{order.SalesOrderNumber}}"  id="{{$index}}"
                                ng-checked="selection.indexOf(order.SalesOrderNumber)> -1" ng-click="toggleSelection(order.SalesOrderNumber)"/>
                                <label class="km-checkbox-label" style="position:relative; bottom:1em;" for="{{$index}}"></label>
                            </td>
                            <td class="v-align" ng-if="searchParameterId == '1'">
                              <div ng-repeat="orderNumber in value | limitTo : 3">
                            {{ orderNumber.OrderNumber }}                            
                         </div>
                          <p><a  ng-click="showMoreOrderModel(value)" ng-show="value.length > 3">
                               {{form.seeMore.resoruceValue}}
                               </a>
                            </p>
                            </td>
                            <td ng-if="searchParameterId == '1'"  valign="center">
                           {{order.SalesOrderNumber}}
                            </td>
                            <td valign="center" ng-if="searchParameterId == '2'">
                              {{order.SalesOrderNumber}} 
                            </td>
                            <td class="v-align" ng-if="searchParameterId == '2'">
                            <div ng-repeat="orderNumber in value | limitTo : 3">
                            {{ orderNumber.OrderNumber }}                            
                         </div>
                          <p><a  ng-click="showMoreOrderModel(value)" ng-show="value.length > 3">
                               {{form.seeMore.resoruceValue}}
                               </a>
                            </p>
                            </td>
                           
                            <td valign="center" ng-if="searchParameterId == '3'">
                            
                              {{order.ShoppingCartId}}
                          
                            </td>
                            <td valign="center" ng-if="searchParameterId == '3'">
                              
                              {{order.SalesOrderNumber}} 
                            </td>
                            <td valign="center" ng-if="searchParameterId == '4'">
                              
                              {{order.VendorRef}}
                        
                         
                            </td>
                            <td valign="center" ng-if="searchParameterId == '4'">
                              
                              {{order.SalesOrderNumber}}
                           
                            </td>
                            <td  valign="center">
                                <p>{{order.OrderDate | date : 'MM/dd'}}  </p>
                            </td>
                            <td  valign="center" style="margin-top:-10px;">
                                <a  ng-if="searchParameterId == '1'" ng-click="orderList(1, searchParameterId, order.OrderNumber)">
                                    <i class="km-icon km-details red"></i>
                                </a>
                                <a  ng-if="searchParameterId == '2'"  ng-click="orderList(1, searchParameterId, order.SalesOrderNumber)">
                                    <i class="km-icon km-details red"></i>
                                </a>
                                <a  ng-if="searchParameterId == '3'" ng-click="orderList(1, searchParameterId, order.ShoppingCartId)">
                                    <i class="km-icon km-details red"></i>
                                </a>
                                <a  ng-if="searchParameterId == '4'"  ng-click="orderList(1, searchParameterId, order.VendorRef)">
                                    <i class="km-icon km-details red"></i>
                                </a>
                            </td>
                        </tr>
                        </table>
                    <table class="ck-table">
                        <tr>
                            <td colspan="5" style="padding: 1em;">
                                <i></i>
                                <kendo-mobile-button class="km-secondary ck-btn-left" ng-click="ViewMore(1)">{{form.viewAll.resoruceValue}}</kendo-mobile-button>
                                <i></i>
                                <kendo-mobile-button class="km-primary ck-btn-right" k-rel="'modalview'" ng-click="showApprovalModel(1)">{{form.bulkApprove.resoruceValue}}</kendo-mobile-button>
                            </td>
                        </tr>
                    </table>
                </ul>
                <ul kendo-mobile-list-view style="display:none" data-retailer="{{orderCount.RetailerId}}" class="order-header" data-orderType="New">
                     <li ng-show="!orders.length > 0">
                        {{form.noResults.resoruceValue}}
                    </li>
                    <table class="ck-table" ng-show="orders.length > 0">
                        <tr class="header">
                            <td>&nbsp;</td>                                     
                            <td ng-if="searchParameterId == '4'" class="spacer">{{form.vendorRef.resoruceValue}}</td>
                            <td ng-if="searchParameterId == '4' || searchParameterId == '1'"  class="spacer">{{form.orderNumber.resoruceValue}}</td>
                            <td ng-if="searchParameterId != '4'">{{form.orgName.resoruceName}}</td>                        
                             <td>{{form.dateInSystem.resoruceValue}}</td>
                          <td></td>
                        </tr>
                        <tr class="pipe" ng-show="searchParameterId == '2' ||  searchParameterId == '3' ">
                            <td  colspan="5">
                            {{form.neworderNoResult.resoruceValue}}
                                </td>
                        </tr>
                        <tr class="pipe" ng-repeat="order in orders" ng-hide="searchParameterId == '2'  || searchParameterId == '3'">
                            <td></td>
                           
                            <td class="v-align" ng-if="searchParameterId == '4'">
                                <a class="data-btn" kendo-mobile-button ng-click="orderDetail(2, searchParameterId, order.VendorRef)">
                                      {{order.VendorRef}}  
                                </a>
                            </td>
                               <td class="v-align" ng-if="searchParameterId == '4' || searchParameterId == '1'">
                            {{order.OrderNumber}}
                                <p ng-repeat="orderline in order.Orders | limitTo : 3">  {{orderline.Order}} </p>
                                <a  ng-click="showMoreOrderModel(order.Orders)" ng-show="order.Orders.length > 3">
                           {{form.seeMore.resoruceValue}}
                           </a>
                            </td>
                            <td ng-if="searchParameterId != '4'">   
                              <div>{{order.OrganizationName}} </div>

                            </td>
                            <td>
                             
                                <div  ng-if="searchParameterId == '1' || searchParameterId == '4'" >{{order.DateInSystem | date : 'MM/dd'}}  </div>
                             
                            </td>
                       
                              <td  valign="center" style="margin-top:-10px;">
                                <a  ng-if="searchParameterId == '1'" ng-click="orderDetail(2, searchParameterId, order.OrderNumber)">
                                    <i class="km-icon km-details red"></i>
                                </a>                               
                                <a  ng-if="searchParameterId == '4'"  ng-click="orderList(2, searchParameterId, order.VendorRef)">
                                    <i class="km-icon km-details red"></i>
                                </a>
                            </td>
                            </tr>
                        <tr>
                            <td colspan="5" style="padding: 1em;" ng-hide="searchParameterId == '2' ||  searchParameterId == '3' ">
                                <i></i>
                                <kendo-mobile-button class="km-secondary km-justified" ng-click="ViewMore(2)">{{form.viewAll.resoruceValue}}</kendo-mobile-button>
                                <i></i>
                            </td>
                        </tr>
                    </table>
                </ul>
                <ul kendo-mobile-list-view style="display:none" data-retailer="{{orderCount.RetailerId}}" class="order-header" data-orderType="Released">
                     <li ng-show="!orders.length > 0">
                        {{form.noResults.resoruceValue}}
                    </li>
                    <table class="ck-table" ng-show="orders.length > 0">
                    
                        <tr class="header">
                            <td></td>
                            <td ng-if="searchParameterId == '1'" class="spacer">{{form.orderNumber.resoruceValue}}</td>
                            <td ng-if="searchParameterId == '2' " class="spacer">{{form.salesOrder.resoruceValue}}</td>
                            <td ng-if="searchParameterId == '3'" class="spacer">{{form.shoppingCart.resoruceValue}}</td>                            
                            <td ng-if="searchParameterId == '4'" class="spacer">{{form.vendorRef.resoruceValue}}</td>
                             <td ng-if="searchParameterId != '1'" class="spacer">{{form.orderNumber.resoruceValue}}</td>
                            <td>{{form.orderStatus.resoruceValue}}</td>
                            <td >{{form.orderDate.resoruceValue}}</td>
                            <td></td>
                        </tr>
                        <tr class="pipe" ng-repeat="order in orders">
                            <td>&nbsp;</td>
                            <td class="v-align" ng-if="searchParameterId == '1'">
                                <div>{{order.OrganizationName}}</div>
                                  {{order.OrderNumber}}
                                <p ng-repeat="orderline in order.Orders | limitTo : 3">  {{orderline.Order}} </p>
                                <a  ng-click="showMoreOrderModel(order.Orders)" ng-show="order.Orders.length > 3">
                            {{form.seeMore.resoruceValue}}
                           </a>
                            </td>
                            <td class="v-align" ng-if="searchParameterId == '2'">
                             
                                      {{order.SalesOrderNumber}}                                
                              
                            </td>

                             <td class="v-align" ng-if="searchParameterId == '3'">
                             
                                      {{order.ShoppingCartId}}     
                                 
                             
                            </td>
                            <td class="v-align" ng-if="searchParameterId == '4'">
                              
                                      {{order.VendorRef}}         
                             
                            </td>
                              <td class="v-align" ng-if="searchParameterId != '1'">
                              <div>{{order.OrganizationName}}</div>
                                <p ng-repeat="orderline in order.Orders | limitTo : orderLimitDisplay">  {{orderline.Order}} </p>
                                <a  ng-click="showMoreOrderModel(order.Orders)" ng-show="order.Orders.length > 3">
                            {{form.seeMore.resoruceValue}}
                           </a>
                            </td>
                        <!--    <td>{{order.Status}}</td>
                              remove below line once new framework is deployed-->-->
                              <td>Open</td>
                            <td>
                                 <p>{{order.OrderDate | date : 'MM/dd'}}  </p>
                               
                            </td>
                     
                         
                              <td  valign="center">
                                <a  ng-if="searchParameterId == '1'" ng-click="orderDetail(3, searchParameterId, order.OrderNumber)">
                                    <i class="km-icon km-details red"></i>
                                </a>     
                                   <a  ng-if="searchParameterId == '2'" ng-click="orderList(3, searchParameterId, order.SalesOrderNumber)">
                                    <i class="km-icon km-details red"></i>
                                </a>  
                                  <a  ng-if="searchParameterId == '3'"  ng-click="orderList(3, searchParameterId, order.ShoppingCartId)">
                                    <i class="km-icon km-details red"></i>
                                </a>                              
                                <a  ng-if="searchParameterId == '4'"  ng-click="orderList(4, searchParameterId, order.VendorRef)">
                                    <i class="km-icon km-details red"></i>
                                </a>
                            </td>
                               </tr>
                           
                        <tr>

                            <td colspan="5" style="padding: 1em;">
                                <i></i>
                                <kendo-mobile-button class="km-secondary km-justified"  ng-click="ViewMore(1)">{{form.viewAll.resoruceValue}}</kendo-mobile-button>
                                <i></i>
                            </td>
                        </tr>
                    </table>
                </ul>
            </div>
        </ul>
        <!-- End Home View -->


    </kendo-mobile-content>
    <kendo-mobile-footer ng-show="message" class='ck-grey-wrap'>
        <p  class="text-center ckp-a-link message" k-transition="'slide'" ng-bind-html="renderHtml(message)"></p>
    </kendo-mobile-footer>
    <!--  view more po modal  -->
    <div kendo-mobile-modal-view id="modalview-moreOrder" class="km-moduleview" style="width: 100%; height:100%; background:rgba(255, 255, 255, 0);">
        <div kendo-mobile-header>
            <div kendo-mobile-nav-bar class="km-dark">
                <kendo-view-title>{{form.orderList.resoruceValue}}</kendo-view-title>
                <kendo-mobile-button ng-click="hideMoreOrderModel()" data-tap="myTouch.tap" k-transition="'fade'" k-align="'right'" style="background: none; border: none;">
                    <img src="styles/images/close-button.png" style="width: 1.6em; height: 1.6em;" />
                </kendo-mobile-button>
            </div>
        </div>
        <div  style="margin-bottom: .5em;" class="ck-module-solid ck-no-border" k-style="'inset'">
        <ul kendo-mobile-list-view ng-repeat="order in orderList">
            <li>{{order.OrderNumber}} </li>
        </ul>
            </div>

    </div>
    <!--  Alert modal  -->
    <div kendo-mobile-modal-view id="modalview-alerts" k-transition="'overlay:up'" class="km-moduleview" style="width: 98%; height:100%; background:rgba(255, 255, 255, 0);">
        <kendo-mobile-header>
            <kendo-mobile-nav-bar class="km-dark">
                <kendo-view-title>{{form.alertsAndNews.resoruceValue}}</kendo-view-title>
                <kendo-mobile-button ng-click="hideAlertModel()" data-tap="myTouch.tap" k-transition="'fade'" k-align="'right'" style="background: none; border: none;">
                    <img src="styles/images/close-button.png" style="width: 1.6em; height: 1.6em;" />
                </kendo-mobile-button>
            </kendo-mobile-nav-bar>
        </kendo-mobile-header>
        <ul kendo-mobile-list-view style="margin-bottom: .5em;" class="ck-module-solid" k-style="'inset'" ng-show="mesages.AnnouncementList.length <= 0 && mesages.PartnerHolidayList.length <=0">
            <li>
                 {{form.noMessages.resoruceValue}}
               !
            </li>
        </ul>
        <ul kendo-mobile-list-view style="margin-bottom: .5em;" class="ck-module-solid ck-no-border" k-style="'inset'" ng-show="mesages.AnnouncementList.length > 0">
            <li class="ck-module-date">
                <i class="ck-icon ck-news ck-module-icon"></i>
                <span class="ck-font-size-mid"> {{form.announcements.resoruceValue}}</span>
            </li>
            <span kendo-mobile-list-view ng-repeat="(key, value) in mesages.AnnouncementList | groupBy: 'SpecificRetailerId' | orderBy: 'SpecificRetailerId'">
                <li ng-if="value[0].SpecificRetailerId > 0 && value[0].Message !==''">
                    <b>{{value[0].Title}} </b> ({{value[0].RetailerName}}) 
            
                    
                    <p>
                        <span ng-bind-html="renderHtml(value[0].Message)"></span>
                    </p>
                </li>
            </span>
        </ul>
        <ul kendo-mobile-list-view style="margin-bottom: .5em;" class="ck-module-solid" k-style="'inset'" ng-show="mesages.PartnerHolidayList.length > 0">
            <li class="ck-module-date">
                <i class="ck-icon ck-alert ck-module-icon"></i>
                <span class="ck-font-size-mid">{{form.printShopHolidays.resoruceValue}}</span>
            </li>
            <li ng-repeat="message in mesages.PartnerHolidayList">
                <b> {{message.Name}} </b>
                <p>({{message.HolidayDescription}}) closed on {{ message.StartDate | date}} - {{message.EndDate | date}} </p>
            </li>
        </ul>
        <ul kendo-mobile-list-view style="margin-bottom: .5em;" class="ck-module-solid ck-no-border" k-style="'inset'" ng-show="mesages.AnnouncementList.length > 0">
            <li class="ck-module-date">
                <i class="ck-icon ck-news ck-module-icon"></i>
                <span class="ck-font-size-mid">Checkpoint Systems, Inc.</span>
            </li>
            <li>
                <ul kendo-mobile-list-view ng-repeat="(key, value) in mesages.AnnouncementList | groupBy: 'SpecificRetailerId' | orderBy: 'SpecificRetailerId' ">
                    <li class="km-font" ng-if="value[0].SpecificRetailerId == 0 && value[0].Message && value[0].Title">
                        <b>{{value[0].Title}} </b>
                        <p>
                            <span ng-bind-html="renderHtml(value[0].Message)"></span>
                        </p>
                    </li>
                </ul>
            </li>
        </ul>
    </div>
    <!--  credit lock modal  -->
    <div kendo-mobile-modal-view id="modalview-credit" class="km-moduleview" style="width: 98%; height:100%; background:rgba(255, 255, 255, 0);">
        <div kendo-mobile-header>
            <div kendo-mobile-nav-bar class="km-dark">
                <kendo-view-title> {{form.creditLock.resoruceValue}}</kendo-view-title>
                <kendo-mobile-button ng-click="hideCreditModel()" data-tap="myTouch.tap" k-transition="'fade'" k-align="'right'" style="background: none; border: none;">
                    <img src="styles/images/close-button.png" style="width: 1.6em; height: 1.6em;" />
                </kendo-mobile-button>
            </div>
        </div>
        <ul kendo-mobile-list-view style="margin-bottom: .5em;" class="ck-module-solid ck-no-border" k-style="'inset'">
            <li class="ck-module-date">
                <i class="ck-icon ck-lock ck-module-icon"></i>
                <span class="ck-font-size-mid">   {{form.creditLock.resoruceValue}}</span>
            </li>
            <li>
                <h3 class="km-bold-font">{{form.attentionUser.resoruceValue}}</h3>
                <h3 class="km-font">
                       {{form.creditLockMessage.resoruceValue}}
                    </h3>
            </li>
        </ul>
    </div>
</kendo-mobile-view>
 <!--       <ul ng-repeat="(key, value) in orders | groupBy: sortOrder">
  Group by {{sortOrder}}: {{ key }}
  <li ng-repeat="order in value | limitTo : 3">
   {{ order.OrderNumber }}  {{ order.OrderDate | date }} {{ order.POCtrlNo }}
  </li>
</ul>-->

     <!--    <table class="ck-table"  ng-repeat="(key, value) in orders | groupBy: sortOrder">
                   <tr>
                      <td>{{sortOrder }} : {{key}}</td>
                   </tr>
                   <tr class="pipe" ng-repeat="order in value | limitTo : 1">
                      <td>
                         <div ng-repeat="orderNumber in value | limitTo : 3">
                            {{ orderNumber.OrderNumber }}                            
                         </div>
                          <p><a  ng-click="showMoreOrderModel(value)" ng-show="value.length > 3">
                               {{form.seeMore.resoruceValue}}
                               </a>
                            </p>
                      </td>
                      <td ng-show="$first" valign="center">{{ key }} </td>
                      <td ng-show="$first" valign="center">  {{ order.OrderDate | date }} </td>
                   </tr>
                </table>-->
           